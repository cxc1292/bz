
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>BreadZone Dough Calculator</title>
    <script language="JavaScript1.2">

        function setDedaults() {
            const date = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = date.toLocaleDateString(undefined, options);

            document.getElementById("title").textContent = `打面助理`;
            document.getElementById("date").textContent = `${formattedDate}`
            document.getElementById("a1").value = "35";
            document.getElementById("b1").value = "96";
            document.getElementById("d1").innerHTML = "1.6";
            setPlateWeight(1);

            document.getElementById("a2").value = "70";
            document.getElementById("b2").value = "60";
            document.getElementById("d2").innerHTML = "3.9";
            setPlateWeight(2);

            document.getElementById("a3").value = "85";
            document.getElementById("b3").value = "60";
            document.getElementById("d3").innerHTML = "4.5";
            setPlateWeight(3);

            document.getElementById("a4").value = "100";
            document.getElementById("b4").value = "60";
            document.getElementById("d4").innerHTML = "5.0";
            setPlateWeight(4);

            document.getElementById("a5").value = "300";
            document.getElementById("b5").value = "20";
            document.getElementById("a6").value = "420";
            document.getElementById("b6").value = "15";
            document.getElementById("a7").value = "470";
            document.getElementById("b7").value = "15";
            document.getElementById("a8").value = "900";
            document.getElementById("b8").value = "6";
            document.getElementById("a9").value = "4200";
            document.getElementById("b9").value = "2";
        }

        function setPlateWeight(row) {
            var v = document.getElementById("a" + row).value;
            document.getElementById("e" + row).innerHTML = "";
            if (v <= 200 && v > 0) {
                var plate = v * 30;
                var extra = Math.floor(plate / 1000) * 10 //add 5g extra for every 500g
                document.getElementById("e" + row).innerHTML = plate + extra;

            }
        }

        function calculateRemainderAndQuotient(a, b) {
            //the code of this function was generated by ChatGPT 10/Jun/2023
            var quotient = Math.floor(a / b);
            var remainder = a % b;

            return {
                quotient: quotient,
                remainder: remainder
            };
        }

        function cal() {

            var total = 0;
            var boxes = 0;
            var remder = 0;

            for (i = 1; i <= 12; i++) {
                var a = "a" + i;
                var b = "b" + i;
                var c = "c" + i;
                var w = "w" + i;
                var weight = 0;

                if (document.getElementById(a).value <= 100) {
                    boxes += document.getElementById(c).value * 1;
                    weight = document.getElementById(a).value * document.getElementById(b).value * document.getElementById(c).value / 1000;
                }
                else {
                    var vc = document.getElementById(c).value;
                    var vb = document.getElementById(b).value;

                    if (vc > 0 && vb > 0) {
                        var res = calculateRemainderAndQuotient(vc, vb);
                        boxes += res.quotient;
                        remder += res.remainder / vb; //this is only a rough estimate by accumulating [remainder]/[number of pieces per box] for each item > 100g
                        //document.getElementById("d" + i).innerHTML = "rd:" + remder;
                        //document.getElementById("e" + i).innerHTML = "r=" + res.remainder;
                    }
                    weight = document.getElementById(a).value * document.getElementById(c).value / 1000;
                }

                document.getElementById(w).innerHTML = weight > 0 ? weight.toFixed(2) : "";
                total += weight;


                var v = document.getElementById(a).value;
                var n = Math.round((document.getElementById(b).value * document.getElementById(c).value / 30) * 10) / 10;

                document.getElementById("n" + i).innerHTML = (v <= 200 && v > 0) ? n : "-";

                setPlateWeight(i);
            }
            //document.getElementById("totalweight").innerHTML = total.toFixed(2);
            var n = total / 49.3;
            document.getElementById("batches").innerHTML = n.toFixed(1);
            if (Number.isInteger(remder))
                boxes += remder;
            else
                boxes += Math.floor(remder) + 1; //if there is remainder, then add one more box to accommondate that.

            document.getElementById("boxes").innerHTML = boxes;

            for (i = 1; i <= 15; i++) {
                var vv = document.getElementById("w" + i).innerHTML;
                if (vv > 0) {
                    var pct = Math.round((vv / (total)) * 100) + "%";
                    var str = vv + "<div title='" + pct + "' class='bar' style='width:" + pct + "'>&nbsp;</div>";
                    document.getElementById("w" + i).innerHTML = str;

                }
            }
        }

        //below were generated by ChatGPT
        document.addEventListener("DOMContentLoaded", function () {
            const checkboxes = document.querySelectorAll("input[type='checkbox']");
            const resetButton = document.getElementById("resetButton");

            checkboxes.forEach(function (checkbox) {
                checkbox.addEventListener("change", function () {
                    if (checkbox.checked) {
                        checkbox.nextElementSibling.classList.add("completed");
                    } else {
                        checkbox.nextElementSibling.classList.remove("completed");
                    }
                });
            });

            resetButton.addEventListener("click", function () {
                checkboxes.forEach(function (checkbox) {
                    checkbox.checked = false;
                    checkbox.nextElementSibling.classList.remove("completed");
                });
            });
        });
    </script>
    <style>
        body {
            font-size: 150%;
            background-color: #E9E3D3;
            font-family: Arial, Helvetica, sans-serif;
        }

        td {
            vertical-align: middle;
            text-align: right;
            padding: 2px;
        }

        input {
            width: 90px;
            vertical-align: middle;
            height: 25px;
            text-align: right;
            font-size: 85%;
        }

            input.c {
                width: 50px;
            }

        td.e {
            background-color: powderblue;
        }

        td.n {
            background-color: yellowgreen;
        }

        td.w {
            position: relative;
        }

        div.bar {
            position: absolute;
            top: 0px;
            height: 100%;
            background-color: darkgreen;
            opacity: 0.2;
        }

        div.footer {
            font-size: 50%;
            text-align: right;
            color: white;
            background-color: #1E3B63;
            width: 575px;
            padding: 2px
        }

        div.date_box {
            font-weight: bold;
            margin-bottom: 3px;
            color: maroon;
        }

        textarea.note {
            width: 570px;
            height: 200px;
            font-size: 100%
        }

        td.title_box {
            font-weight: bold;
            font-size: 30pt;
            color: #1E3B63
        }

        table.sum {
            font-size: 20pt;
            font-weight: bold;
            background-color: #1E3B63;
            color: white;
            margin-bottom: 5px;
        }

        .checklist label.completed {
            text-decoration: line-through;
            font-weight:normal;
            color: grey;
        }
        .checklist {
            margin-top:20px;
            margin-bottom:20px;
        }
        .checklist label{
            font-weight:bold;
            font-size:30pt;
            color:maroon;
            vertical-align:middle;
        }
        .checklist div{
            font-size:20pt;
            font-weight:bold;
            vertical-align:middle;
        }
        .checklist div button {
            font-size: 15pt;
            font-weight:bold;
            margin-left: 200px;
        }
        .checklist div.divider{
            color:gray;
            font-weight:normal;
        }
    </style>
</head>
<body onload="setDedaults()">
    <table style="background-color: #E9E3D3;margin-bottom:5px">
        <tr>
            <td><img width="300" src="bz_logo_small.jpg"/></td>
            <td id="title" class="title_box"></td>
        </tr>
    </table>
    <table>
        <tr><td id="date" style="color:maroon; font-weight:bold"></td></tr>
    </table>
    <!--<div id="date" style="font-size:10pt"></div>-->
    <!--<div><img width="100" src="bz_logo_small.jpg"/></div>
    <h2 id="title">Dough calculator</h2>-->
    <table class="sum">
        <!--
        <tr>
            <td>总重(kg): </td>
            <td id="totalweight"></td>
        </tr>
            -->
        <tr>
            <td>缸数(49.3kg/缸): </td>
            <td id="batches"></td>
        </tr>
        <tr>
            <td>箱数: </td>
            <td id="boxes"></td>
        </tr>
    </table>
    <table border="1">
        <tr style="background-color: #E9E3D3; color: #1E3B63">
            <td class="a">面团(g)</td>
            <td class="b">每箱件数</td>
            <td class="c">数量</td>
            <td>重量(kg)</td>
            <td>刻度</td>
            <td>盘重(g)</td>
            <td>盘数</td>
        </tr>
        <tr>
            <td><input type="number" id="a1" class="a" onkeyup="cal()" /></td>
            <td><input type="number" id="b1" class="b" onkeyup="cal()" /></td>
            <td><input type="number" id="c1" class="c" onkeyup="cal()" /></td>
            <td id="w1" class="w"></td>
            <td id="d1"></td>
            <td id="e1" class="e"></td>
            <td id="n1" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a2" onkeyup="cal()" /></td>
            <td><input type="number" id="b2" onkeyup="cal()" /></td>
            <td><input type="number" id="c2" class="c" onkeyup="cal()" /></td>
            <td id="w2" class="w"></td>
            <td id="d2"></td>
            <td id="e2" class="e"></td>
            <td id="n2" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a3" onkeyup="cal()" /></td>
            <td><input type="number" id="b3" onkeyup="cal()" /></td>
            <td><input type="number" id="c3" class="c" onkeyup="cal()" /></td>
            <td id="w3" class="w"></td>
            <td id="d3"></td>
            <td id="e3" class="e"></td>
            <td id="n3" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a4" onkeyup="cal()" /></td>
            <td><input type="number" id="b4" onkeyup="cal()" /></td>
            <td><input type="number" id="c4" class="c" onkeyup="cal()" /></td>
            <td id="w4" class="w"></td>
            <td id="d4"></td>
            <td id="e4" class="e"></td>
            <td id="n4" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a5" onkeyup="cal()" /></td>
            <td><input type="number" id="b5" onkeyup="cal()" /></td>
            <td><input type="number" id="c5" class="c" onkeyup="cal()" /></td>
            <td id="w5" class="w"></td>
            <td id="d5"></td>
            <td id="e5" class="e"></td>
            <td id="n5" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a6" onkeyup="cal()" /></td>
            <td><input type="number" id="b6" onkeyup="cal()" /></td>
            <td><input type="number" id="c6" class="c" onkeyup="cal()" /></td>
            <td id="w6" class="w"></td>
            <td id="d6"></td>
            <td id="e6" class="e"></td>
            <td id="n6" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a7" onkeyup="cal()" /></td>
            <td><input type="number" id="b7" onkeyup="cal()" /></td>
            <td><input type="number" id="c7" class="c" onkeyup="cal()" /></td>
            <td id="w7" class="w"></td>
            <td id="d7"></td>
            <td id="e7" class="e"></td>
            <td id="n7" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a8" onkeyup="cal()" /></td>
            <td><input type="number" id="b8" onkeyup="cal()" /></td>
            <td><input type="number" id="c8" class="c" onkeyup="cal()" /></td>
            <td id="w8" class="w"></td>
            <td id="d8"></td>
            <td id="e8" class="e"></td>
            <td id="n8" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a9" onkeyup="cal()" /></td>
            <td><input type="number" id="b9" onkeyup="cal()" /></td>
            <td><input type="number" id="c9" class="c" onkeyup="cal()" /></td>
            <td id="w9" class="w"></td>
            <td id="d9"></td>
            <td id="e9" class="e"></td>
            <td id="n9" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a10" onkeyup="cal()" /></td>
            <td><input type="number" id="b10" onkeyup="cal()" /></td>
            <td><input type="number" id="c10" class="c" onkeyup="cal()" /></td>
            <td id="w10" class="w"></td>
            <td id="d10"></td>
            <td id="e10" class="e"></td>
            <td id="n10" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a11" onkeyup="cal()" /></td>
            <td><input type="number" id="b11" onkeyup="cal()" /></td>
            <td><input type="number" id="c11" class="c" onkeyup="cal()" /></td>
            <td id="w11" class="w"></td>
            <td id="d11"></td>
            <td id="e11" class="e"></td>
            <td id="n11" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a12" onkeyup="cal()" /></td>
            <td><input type="number" id="b12" onkeyup="cal()" /></td>
            <td><input type="number" id="c12" class="c" onkeyup="cal()" /></td>
            <td id="w12" class="w"></td>
            <td id="d12"></td>
            <td id="e12" class="e"></td>
            <td id="n12" class="n"></td>
        </tr>
        <!--<tr>
            <td><input type="number" id="a13" onkeyup="cal()" /></td>
            <td><input type="number" id="b13" onkeyup="cal()" /></td>
            <td><input type="number" id="c13" class="c" onkeyup="cal()" /></td>
            <td id="w13" class="w"></td>
            <td id="d13"></td>
            <td id="e13" class="e"></td>
            <td id="n13" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a14" onkeyup="cal()" /></td>
            <td><input type="number" id="b14" onkeyup="cal()" /></td>
            <td><input type="number" id="c14" class="c" onkeyup="cal()" /></td>
            <td id="w14" class="w"></td>
            <td id="d14"></td>
            <td id="e14" class="e"></td>
            <td id="n14" class="n"></td>
        </tr>
        <tr>
            <td><input type="number" id="a15" onkeyup="cal()" /></td>
            <td><input type="number" id="b15" onkeyup="cal()" /></td>
            <td><input type="number" id="c15" class="c" onkeyup="cal()" /></td>
            <td id="w15" class="w"></td>
            <td id="d15"></td>
            <td id="e15" class="e"></td>
            <td id="n15" class="n"></td>
        </tr>-->

    </table>

    <div style="font-family:Arial, Helvetica, sans-serif">
        <table><tr><td style="font-weight:bold; font-size:30pt;">注释:</td></tr></table>
        <div><textarea class="note"></textarea></div>
    </div>
    <div class="checklist">
        <table>
            <tr>
                <td style="font-size:30pt;font-weight:bold;">Check list </td>
                <td><img style="margin-left:200px;vertical-align:middle;" id="resetButton" height="50" src="reset.png" /></td>
            </tr>
        </table>
        <!--<button  id="resetButton"><img height="30" src="reset.png"/></button>-->
        <input type="checkbox" id="checkbox1">
        <label for="checkbox1">面粉 25,000g</label><br>

        <input type="checkbox" id="checkbox2">
        <label for="checkbox2">酵母 250g</label><br>

        <input type="checkbox" id="checkbox3">
        <label for="checkbox3">盐 250g</label><br>

        <input type="checkbox" id="checkbox4">
        <label for="checkbox4">改良剂 250g</label><br>

        <input type="checkbox" id="checkbox5">
        <label for="checkbox5">面筋粉 300g</label><br>

        <input type="checkbox" id="checkbox6">
        <label for="checkbox6">奶粉 750g</label><br>

        <input type="checkbox" id="checkbox7">
        <label for="checkbox7">糖 4,500g</label><br>

        <div class="divider">-----------------------------------------</div>

        <input type="checkbox" id="checkbox8">
        <label for="checkbox8">蛋 2,500g</label><br>

        <input type="checkbox" id="checkbox9">
        <label for="checkbox9">水+冰 13,000g</label><br>

        <div class="divider">-----------------------------------------</div>

        <input type="checkbox" id="checkbox10">
        <label for="checkbox10">黄油 2,500g</label><br>

        <div class="divider">-----------------------------------------</div>

        <table>
            <tr>
                <td style="font-size:30pt;font-weight:bold">
                    总重：49,300g
                </td>
            </tr>
        </table>
    </div>
    <div class="footer">&copy;2023 BREADZONE Version: 3.0</div>
</body>
</html>